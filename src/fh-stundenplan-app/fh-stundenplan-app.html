<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<!-- <link rel="import" href="../../bower_components/polymer/polymer.html"> -->
<link rel="import" href="../elements.html">

<dom-module id="fh-stundenplan-app">
    <template>
        <style>
             :host {
                display: block;
                min-width: 300px;
            }

            app-header {
                background-color: #F44336;
                color: #fff;
                padding-bottom: 2px;
                padding-left: 10px;
                padding-right: 10px;
            }

            paper-tabs {
                width: 100%;
                max-width: 750px;
                margin: 0 auto;
            }

            paper-tabs paper-tab {
                min-width: 54px;
            }

            app-toolbar {
                height: 64px;
            }

            @media(max-width: 650px) {
                app-toolbar {
                    height: 52px;
                }
                paper-dialog {
                    max-width: 420px;
                }
            }
            paper-dialog{
                position: absolute;
                min-height: 320px;
                max-width: 550px;
                min-width: 200px;
                left: 2%;
                top: 17%;
                right: 2%;
                margin-right: auto;
                margin-left: auto;
            }
            @media (max-height: 575px){
                paper-dialog{
                    top: 8%;
                }
            }
        </style>
        <paper-dialog id="settingsDialog">
            <stundenplan-settings id="settings" 
                                on-close="handleCloseEvent"
                                on-feed="handleFeedEvent"
                                on-reset="handleResetEvent" 
                                url="[[baseFeedUrl]]" 
                                on-filter="handleFilterEvent">
            </stundenplan-settings>
        </paper-dialog>    
        <app-header-layout has-scrolling-region fullbleed>
            <app-header slot="header" effects="waterfall" fixed>
                <app-toolbar>
                    <div main-title>FH-Stundenplan</div>
                    <paper-icon-button on-click="showSettings" icon="settings"></paper-icon-button>
                </app-toolbar>
                <paper-tabs id="tabs" autoselect-delay="0" selected="{{day}}" 
                            no-slide autoselect hide-scroll-buttons="true" 
                            scrollable fit-container="true"
                            attr-for-selected="day">
                    <paper-tab day="Mon">Montag</paper-tab>
                    <paper-tab day="Tue">Dienstag</paper-tab>
                    <paper-tab day="Wed">Mittwoch</paper-tab>
                    <paper-tab day="Thu">Donnerstag</paper-tab>
                    <paper-tab day="Fri"> Freitag</paper-item>
                </paper-tabs>
            </app-header>
                <iron-pages id="pages" selected="{{day}}" attr-for-selected="week-day">
                    <stundenplan-fetcher 
                        sorted-events="{{data}}" 
                        feed-events-url="[[feedEventsUrl]]">
                    </stundenplan-fetcher>

                    <stundenplan-feed 
                        list-original="[[data.Mon]]"
                        filter-by="{{filterBy}}"
                        week-day="Mon">
                    </stundenplan-feed>
                    <stundenplan-feed 
                        list-original="[[data.Tue]]"
                        filter-by="{{filterBy}}" 
                        week-day="Tue">
                    </stundenplan-feed>
                    <stundenplan-feed 
                        list-original="[[data.Wed]]"
                        filter-by="{{filterBy}}" 
                        week-day="Wed">
                    </stundenplan-feed>
                    <stundenplan-feed
                        list-original="[[data.Thu]]"
                        filter-by="{{filterBy}}" 
                        week-day="Thu">
                    </stundenplan-feed>
                    <stundenplan-feed 
                        list-original="[[data.Fri]]"
                        filter-by="{{filterBy}}" 
                        week-day="Fri">
                    </stundenplan-feed>
                    
                </iron-pages>
        </app-header-layout>
    </template>
    <script src="fh-stundenplan-app.js"></script>
</dom-module>